<!DOCTYPE html>
<html>

<head>
	<meta charset="utf-8" />
	<title>Mapbox Example 7- Tube map background</title>
	<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no" />
	<link href="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.css" rel="stylesheet">
	<script src="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.js"></script>
	<!-- 引入CSS文件 -->
	<link href='Mapbox_example9_styles.css' rel='stylesheet' />


	<style>
		body {
			margin: 0;
			padding: 0;
		}

		#map {
			position: absolute;
			top: 0;
			bottom: 0;
			width: 100%;
		}

		;
	</style>
</head>


<body>
	<div id="map"></div>
	<!-- class='map-overlay top' 指定了该容器的类名为 map-overlay，并且添加了 top 类。这些类用于指定样式和定位。 -->
	<div class='map-overlay top'>
		<!-- 内嵌的 <div> 元素，用于创建容器的内部内容。 -->
		<div class='map-overlay-inner'>
			<h2>Worldwide Unempolyment Rate</h2>
			<table>
				<tr>
					<td>
						<!-- <input> 元素，创建了一个滑动条输入框。 -->
						<input id='slider' type='range' min='0' max='14' step='1' value='0' list='tickmarks' />
						<datalist id="tickmarks">
							<option value="0" label="2008">
							<option value="1">
							<option value="2">
							<option value="3">
							<option value="4">
							<option value="5">
							<option value="6" label="2014">
							<option value="7">
							<option value="8">
							<option value="9">
							<option value="10">
							<option value="11">
							<option value="12">
							<option value="13">
							<option value="14">
							<option value="14" label="2022">
						</datalist>
					</td>
					<td>
						<label id='year'>2008</label>
					</td>
				</tr>
			</table>
			<p class="credit">Passenger data: <a href="http://crowding.data.tfl.gov.uk/">TfL</a>. Line and Station data: <a
					href="https://github.com/oobrien/vis/tree/master/tube/data">Oliver O'Brien</a></p>
		</div>
	</div>



	<script>
		mapboxgl.accessToken = 'pk.eyJ1IjoibHljMTk5OTExMTEiLCJhIjoiY2t0bjMzN2xkMmMwMzJ2cWZueXZzZHN0ZSJ9.BQGI-sCp3fhGZSD8NTeFtw';  //Put your mapbox access token here

		// Load a new map in the 'map' HTML div
		var map = new mapboxgl.Map({
			container: 'map', // container id
			style: 'mapbox://styles/lyc19991111/cltaoiowe00g501qn2m2ifij6', // Put your mapbox style ID here
			center: [-0.1, 51.5], // starting position [lng, lat]
			zoom: 1 // starting zoom
		});


	map.on('load', function () {
		
			// 使用 map.getStyle().layers 检查图层的顺序
			var layers = map.getStyle().layers;
			var layerId;
			for (var i = 0; i < layers.length; i++) {
				if (layers[i].id === 'FINAL_DATASET') {
					layerId = layers[i].id;
					break;
				}
			}

			// 如果在地图样式中找到了 'FINAL_DATASET' 图层
			if (layerId) {
				// 在 'FINAL_DATASET' 图层下面添加您的新图层 'JustaNAme'
				map.addLayer({
					id: 'JustaNAme',
					type: 'fill',
					source: {
						type: 'vector',
						url: 'mapbox://lyc19991111.5flmdelq'
					},
					'source-layer': 'Final_01-2qxwjk',
					'layout': {
						'visibility': 'visible'
					},
					'paint': {
						'fill-color': [
							'interpolate',
							['linear'],
							['get', 'WUR2000'],
							0, '#053061',
							2, '#053061',
							4, '#2065ab',
							6, '#4393c3',
							8, '#90c4dd',
							10, '#d1e5f0',
							12, '#f7f6f6',
							14, '#f9ede5',
							16, '#fbe3d4',
							18, '#fcd7c2',
							20, '#f9c4a9',
							24, '#f09c7b',
							28, '#da6853',
							32, '#c13639',
							36, '#9c1127',
							40, '#67001f',
							10000, '#c7c7c7'
							
						],
						'fill-opacity': 0.95
					}
				}, layerId); // 指定在 'FINAL_DATASET' 下面添加图层
			} else {
				// 如果没有找到 'FINAL_DATASET'，可能需要检查图层的ID或等待它加载
				console.error("'FINAL_DATASET' 图层未找到");
			}

			// 设置国家边界的线宽
			  if (map.getLayer('FINAL_DATASET')) {
			map.setPaintProperty('FINAL_DATASET', 'line-width', {
				'base': 1, // 这是放大比例的基数，默认值为1
				'stops': [
					[0, 0.5],  // 在缩放级别0时，线宽为0.5
					[5, 1],    // 在缩放级别5时，线宽为1
					[10, 2],   // 在缩放级别10时，线宽为2
					// 您可以根据需要继续添加更多的停靠点
				]
			});
		} else {
			console.error('图层 "FINAL_DATASET" 不存在。');
		}




		

		});





	</script>

</body>

</html>